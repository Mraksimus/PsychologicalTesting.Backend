CREATE TABLE IF NOT EXISTS test (id uuid PRIMARY KEY, "name" TEXT NOT NULL, description TEXT NOT NULL, transcript TEXT NOT NULL, duration_mins TEXT NOT NULL, is_active BOOLEAN NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, "position" INT NOT NULL);
CREATE TABLE IF NOT EXISTS question (id uuid PRIMARY KEY, test_id uuid NOT NULL, "content" JSONB NOT NULL, "position" INT NOT NULL, CONSTRAINT fk_question_test_id__id FOREIGN KEY (test_id) REFERENCES test(id) ON DELETE CASCADE ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS testing_session (id uuid PRIMARY KEY, user_id uuid NOT NULL, test_id uuid NOT NULL, question_responses JSONB NOT NULL, "result" TEXT NULL, status VARCHAR(11) NOT NULL, created_at TIMESTAMP NOT NULL, closed_at TIMESTAMP NULL, CONSTRAINT fk_testing_session_user_id__id FOREIGN KEY (user_id) REFERENCES "user"(id) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_testing_session_test_id__id FOREIGN KEY (test_id) REFERENCES test(id) ON DELETE CASCADE ON UPDATE RESTRICT);
